<div class="container">
    <div style="text-align:left">
        <h1 style="padding-bottom: 10px">
        Task Manager
        </h1>
    </div>
    <div class=" row buttonClass">
        <div class="col-md-8">
            <div class="row">
                    <div class="col-md-2"><button type="button" class="btn btn-secondary" [routerLink] = "'/add'">Add Task</button></div>
                    <div class="col-md-1"></div>
                    <div class="col-md-4"><button type="button" class="btn btn-primary" [disabled]= true>View Task</button></div>
            </div>             
        </div>
    </div>
    <div style="text-align:left">
        <div class="row" style="padding-bottom: 10px ">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                <span class="input-group-text">Task:</span>
                </div>
                <input type="text" [(ngModel)]="searchTask" class="form-control" aria-describedby="basic-addon3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Parent Task:</span>
                </div>
                <input type="text" [(ngModel)]="searchParent" class="form-control" aria-describedby="basic-addon3">
            </div>
                
        </div>
        <div class="row" style="padding-bottom: 10px">
        <div class="input-group mb-3" style="padding-right: 15px">
            
            <div class="input-group-prepend">
                <span class="input-group-text">Priority From:</span>
            </div>
            <input type="text" [(ngModel)]="priorityFrom" class="form-control">
            
            <div class="input-group-prepend">
                <span class="input-group-text">Priority To:</span>
            </div>
            <input type="text" [(ngModel)]="priorityTo" class="form-control">
            <div class="input-group-prepend">
                <span class="input-group-text">Start Date:</span>
            </div>
            <input type="date" [(ngModel)]="startDate" class="form-control">
            <div class="input-group-prepend">
                <span class="input-group-text">End Date:</span>
            </div>
            <input type="date" [(ngModel)]="endDate" class="form-control">
        </div>
        </div>
    </div>
    <hr>
    <div *ngIf ="taskResponse">
        <div *ngIf= "taskResponse.result.status == 'SUCCESS' && taskResponse.taskList">
            <div *ngFor="let task of taskResponse.taskList | filter : searchTask: searchParent: priorityFrom: priorityTo: startDate: endDate" style="padding-bottom: 10px">
                <div class="row">
                    <div class="col-md-2">
                            <span class="badge badge-secondary"><h6 style="margin-bottom: .1rem">Task</h6></span> <br>
                            {{task.task}}
                    </div>
                    <div class="col-md-2">
                            <span class="badge badge-secondary"><h6 style="margin-bottom: .1rem">Parent</h6></span> <br>
                            <div *ngIf = "task.parentTask && task.parentTask != ''">
                                {{task.parentTask}}
                            </div>
                            <div *ngIf = "!task.parentTask || task.parentTask == ''">
                                    No Parent task associated.
                            </div>
                    </div>
                    <div class="col-md-2">
                            <span class="badge badge-secondary"><h6 style="margin-bottom: .1rem">Priority</h6></span> <br>
                            {{task.priority}}
                    </div>
                    <div class="col-md-2">
                            <span class="badge badge-secondary"><h6 style="margin-bottom: .1rem">Start</h6></span> <br>
                            {{task.startDate}}
                    </div>
                    <div class="col-md-2">
                            <span class="badge badge-secondary"><h6 style="margin-bottom: .1rem">End</h6></span> <br>
                            {{task.endDate}}
                    </div>
                    <div *ngIf = "!task.editable" class="row">
                        <div class="col-md-4">
                            <button type="button" class="btn btn-light" disabled>Edit</button>
                        </div>
                        <div class="col-md-8">
                            <button type="button" class="btn btn-light" disabled>End Task</button>
                        </div>    
                    </div>
                    <div *ngIf = "task.editable" class="row">
                        <div class="col-md-4">
                            <button type="button" class="btn btn-dark" [routerLink] = "'/update'" (click)="showUpdate(task)" >Edit</button>
                        </div>
                        <div class="col-md-8">
                            <button type="button" class="btn btn-dark" (click)="endTask(task)">End Task</button>
                        </div>
                    </div>
                </div> 
                <div class ="row">
                    <hr>
                </div>               
            </div>
        </div>
    </div>
</div>